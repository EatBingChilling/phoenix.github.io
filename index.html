<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HTML 画板</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
    body {
        margin: 0;
        padding: 0;
        font-family: "Roboto", sans-serif;
        background-color: #f0f0f0;
        color: #333;
    }
    #canvas {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: #fff;
        cursor: crosshair;
        z-index: -1; /* 将画板置于最底层 */
    }
    #sidebar {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 330px;
        height: 100%;
        background-color: #fff;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease;
        transform: translateX(-100%);
        overflow: auto; /* 添加滚动条 */
    }
    #sidebar.open {
        transform: translateX(0);
    }
    #sidebar-content {
        padding: 20px;
    }
    #toggle-btn {
        position: fixed;
        bottom: 20px;
        left: 20px;
        width: 50px;
        height: 50px;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        transition: opacity 0.3s ease;
        opacity: 1; /* 默认显示按钮 */
        font-size: 24px;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    #toggle-btn:hover {
        background-color: #0056b3;
    }
    button {
        padding: 10px 20px;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        margin-bottom: 10px;
        font-size: 16px;
    }
    button:hover {
        background-color: #0056b3;
    }
    input[type="text"],
    select,
    input[type="range"],
    input[type="checkbox"] {
        margin-bottom: 10px;
        font-size: 16px;
    }
</style>
</head>
<body>
<canvas id="canvas"></canvas>

<div id="sidebar">
    <div id="sidebar-content">
        <!-- 在侧边栏中嵌入 iframe 播放器 -->
        <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="100%" height="86" src="//music.163.com/outchain/player?type=2&id=1958557540&auto=1&height=66"></iframe>
    </div>
</div>

<button id="toggle-btn" onclick="toggleSidebar()">...</button>

<script>
    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    var painting = false;

    canvas.addEventListener('mousedown', startPosition);
    canvas.addEventListener('touchstart', startPosition);
    canvas.addEventListener('mousemove', draw);
    canvas.addEventListener('touchmove', draw);
    canvas.addEventListener('mouseup', endPosition);
    canvas.addEventListener('touchend', endPosition);

    function startPosition(e) {
        painting = true;
        draw(e);
    }

    function endPosition() {
        painting = false;
        ctx.beginPath();
    }

    function draw(e) {
        if (!painting) return;

        if (e.type === 'touchmove' || e.type === 'touchstart') {
            e.preventDefault(); // 防止滚动页面
            e = e.touches[0]; // 获取触摸事件的第一个触摸点
        }

        var mouseX = e.clientX - canvas.offsetLeft;
        var mouseY = e.clientY - canvas.offsetTop;

        if (document.getElementById('eraser-toggle').checked) { // 如果橡皮擦复选框被勾选
            var eraserSize = document.getElementById('eraser-size-range').value;
            ctx.clearRect(mouseX - eraserSize / 2, mouseY - eraserSize / 2, eraserSize, eraserSize);
        } else {
            ctx.lineWidth = document.getElementById('line-width-range').value;
            ctx.lineCap = 'round';
            var color = document.getElementById('color-select').value;
            ctx.strokeStyle = color;

            ctx.lineTo(mouseX, mouseY);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(mouseX, mouseY); // 移动到新的起始点
        }
    }

    function toggleSidebar() {
        document.getElementById('sidebar').classList.toggle('open');
    }
</script>
</body>
</html>
